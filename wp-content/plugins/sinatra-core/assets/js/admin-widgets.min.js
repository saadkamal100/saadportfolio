!function($){"use strict";$("body"),$(document),$("#page"),$("html");var SinatraCoreAdminWidgets={init:function(){$(document).ready(SinatraCoreAdminWidgets.ready),$(window).on("load",SinatraCoreAdminWidgets.load),SinatraCoreAdminWidgets.bindUIActions(),$(document).trigger("sinatraCoreWidgetsReady")},ready:function(){SinatraCoreAdminWidgets.initRepeatableSortable()},load:function(){},bindUIActions:function(){var $this,template,$widget,index=0;$(document).on("click",".si-repeatable-widget .add-new-item",function(e){e.preventDefault(),$this=$(this),index=parseInt($this.attr("data-index")),template=wp.template("sinatra-core-repeatable-item");var data={index:index,name:$this.attr("data-widget-name"),id:$this.attr("data-widget-id")};index++,$this.attr("data-index",index),$(template(data)).insertBefore($this.closest(".si-repeatable-footer")),$this.closest(".widget-inside").trigger("change"),update_widget_repeatable_class($this)}),$(document).on("click",".si-repeatable-widget .remove-repeatable-item",function(e){e.preventDefault(),$this=$(this),$widget=$this.closest(".si-repeatable-container"),$this.closest(".widget-inside").trigger("change"),$this.closest(".si-repeatable-item").remove(),update_widget_repeatable_class($widget)}),$(document).on("click",".si-repeatable-widget .si-repeatable-item-title",function(){$(this).closest(".si-repeatable-item").toggleClass("open")});var update_widget_repeatable_class=function($target){var $widget=$target.closest(".si-repeatable-container");$widget.find(".si-repeatable-item").length?$widget.removeClass("empty"):$widget.addClass("empty")};$(document).on("widget-updated widget-added",function(e,widget){widget.find(".si-repeatable-container").length&&SinatraCoreAdminWidgets.initRepeatableSortable()})},initRepeatableSortable:function(){$(".si-repeatable-container").sortable({handle:".si-repeatable-item-title",accent:".si-repeatable-item",containment:"parent",tolerance:"pointer",change:function(event,ui){$(this).closest(".widget-inside").trigger("change")}})}};SinatraCoreAdminWidgets.init(),window.SinatraCoreAdminWidgets=SinatraCoreAdminWidgets}(jQuery);